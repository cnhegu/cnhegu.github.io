{{/*
    这是一个自定义的页脚模板。
    它的唯一目的是在保留主题所有默认功能的基础上，
    确保作者名可以被正确地链接到首页。
    V2 版本移除了对 busuanzi.html 的调用，以修复编译错误。
*/}}
{{- if .Site.Params.enableFooter -}}
<footer class="footer">
    <div class="footer-inner">
        {{- if .Site.Params.displayFooter -}}
            {{- if or .Site.Params.displayCopyrightSymbol .Site.Params.displaySiteCreatedYear .Site.Params.displaySiteAuthorName -}}
                <div class="copyright">
                    {{- if .Site.Params.displayCopyrightSymbol -}}
                        <span>© </span>
                    {{- end -}}

                    {{- if .Site.Params.displaySiteCreatedYear -}}
                        {{- with .Site.Params.siteCreatedTime -}}
                            <span>{{- . | time.Format "2006" }} - </span>
                        {{- end -}}
                    {{- end -}}

                    <span>{{- now.Format "2006" -}}</span>

                    {{- if .Site.Params.displaySiteAuthorName -}}
                        <span class="division">|</span>
                        {{/* 这是修复作者名链接的关键代码 */}}
                        {{- with .Site.Params.author.website -}}
                            <a href="{{ . | relLangURL }}" target="_blank" rel="noopener">{{ $.Site.Params.author.name }}</a>
                        {{- else -}}
                            <span>{{ $.Site.Params.author.name }}</span>
                        {{- end -}}
                    {{- end -}}
                </div>
            {{- end -}}

            {{- if .Site.Params.displaySiteCopyright -}}
                <div class="copyright">
                    {{- .Site.Copyright | markdownify -}}
                </div>
            {{- end -}}

            {{- if .Site.Params.customFooter -}}
                <div class="custom-footer">
                    {{- .Site.Params.customFooter | markdownify -}}
                </div>
            {{- end -}}

            {{- if .Site.Params.displayPoweredBy -}}
                <div class="powered-by">
                    <span>{{ T "powered_by" }} <a href="https://gohugo.io/" target="_blank" rel="external noopener">Hugo</a></span>
                    <span class="division">|</span>
                    <span>{{ T "theme" }} <a href="https://github.com/reuixiy/hugo-theme-meme" target="_blank" rel="external noopener">MemE</a></span>
                </div>
            {{- end -}}

            {{- partial "socials.html" . -}}

            {{/* 由于我们没有覆写 components/busuanzi.html 文件，
                直接调用会导致 "not found" 错误。
                根据 hugo.toml 中的设置，此功能也可能未开启，
                因此暂时移除此处的调用是最安全的做法。
            */}}
            {{- if .Site.Params.displayBusuanziSiteUVAndPV -}}
                <!-- {{- partial "components/busuanzi.html" . -}} -->
            {{- end -}}
        {{- end -}}
    </div>
</footer>
{{- end -}}