{{- $ := index . "$" -}}
{{- $type := .type -}}
{{- $lang := .lang -}}

{{- $host := $.Site.Params.lib.host | default "https://cdn.jsdelivr.net" -}}
{{- $path := "" -}}

{{- if eq $type "clipboard" -}}
    {{- $default := "/npm/clipboard-polyfill@2.8.6/dist/clipboard-polyfill.min.js" -}}
    {{- $path = $.Site.Params.lib.path.clipboard | default $default -}}
{{- end -}}

{{- if eq $type "instantsearch" -}}
    {{- $default := "/npm/instantsearch.js@2/dist/instantsearch.min.js" -}}
    {{- $path = $.Site.Params.lib.path.instantsearch | default $default -}}
{{- end -}}

{{- if eq $type "gitalk" -}}
    {{- $default := "/npm/gitalk@1/dist/gitalk.min.js" -}}
    {{- $path = $.Site.Params.lib.path.gitalk | default $default -}}
{{- end -}}
{{- if eq $type "gitalk-css" -}}
    {{- $default := "/npm/gitalk@1/dist/gitalk.css" -}}
    {{- $path = $.Site.Params.lib.path.gitalk_css | default $default -}}
{{- end -}}

{{- if eq $type "instantpage" -}}
    {{- $default := "/npm/instant.page@5.1.0/instantpage.min.js" -}}
    {{- $path = $.Site.Params.lib.path.instantpage | default $default -}}
{{- end -}}

{{- if eq $type "katex" -}}
    {{- $default := "/npm/katex@0.13.0/dist/katex.min.js" -}}
    {{- $path = $.Site.Params.lib.path.katex | default $default -}}
{{- end -}}
{{- if eq $type "katex-css" -}}
    {{- $default := "/npm/katex@0.13.0/dist/katex.min.css" -}}
    {{- $path = $.Site.Params.lib.path.katex_css | default $default -}}
{{- end -}}
{{- if eq $type "katex-mhchem" -}}
    {{- $default := "/npm/katex@0.13.0/dist/contrib/mhchem.min.js" -}}
    {{- $path = $.Site.Params.lib.path.katex_mhchem | default $default -}}
{{- end -}}
{{- if eq $type "katex-auto-render" -}}
    {{- $default := "/npm/katex@0.13.0/dist/contrib/auto-render.min.js" -}}
    {{- $path = $.Site.Params.lib.path.katex_auto_render | default $default -}}
{{- end -}}

{{- if eq $type "lunr" -}}
    {{- $default := "/npm/lunr@2.3.9/lunr.min.js" -}}
    {{- $path = $.Site.Params.lib.path.lunr | default $default -}}
{{- end -}}
{{- if eq $type "lunr-tinyseg" -}}
    {{- $default := "/npm/lunr-languages@1.4.0/tinyseg.js" -}}
    {{- $path = $.Site.Params.lib.path.lunr_tinyseg | default $default -}}
{{- end -}}
{{- if eq $type "lunr-stemmer" -}}
    {{- $default := "/npm/lunr-languages@1.4.0/min/lunr.stemmer.support.min.js" -}}
    {{- $path = $.Site.Params.lib.path.lunr_stemmer | default $default -}}
{{- end -}}
{{- if eq $type "lunr-lang" -}}
    {{- $default := printf "/npm/lunr-languages@1.4.0/min/lunr.%s.min.js" $lang -}}
    {{- $path = $.Site.Params.lib.path.lunr_lang | default $default -}}
{{- end -}}

{{- if eq $type "mathjax" -}}
    {{- $default := "/npm/mathjax@3.1.2/es5/tex-mml-chtml.js" -}}
    {{- $path = $.Site.Params.lib.path.mathjax | default $default -}}
{{- end -}}

{{- if eq $type "medium-zoom" -}}
    {{- $default := "/npm/medium-zoom@latest/dist/medium-zoom.min.js" -}}
    {{- $path = $.Site.Params.lib.path.medium_zoom | default $default -}}
{{- end -}}

{{- if eq $type "mermaid" -}}
    {{- $default := "/npm/mermaid@8.8.3/dist/mermaid.min.js" -}}
    {{- $path = $.Site.Params.lib.path.mermaid | default $default -}}
{{- end -}}

{{- if eq $type "qrcode" -}}
    {{- $default := "/npm/qrcode-generator@1.4.4/qrcode.min.js" -}}
    {{- $path = $.Site.Params.lib.path.qrcode | default $default -}}
{{- end -}}

{{- if eq $type "valine" -}}
    {{- $default := "/npm/valine@1.4.14/dist/Valine.min.js" -}}
    {{- $path = $.Site.Params.lib.path.valine | default $default -}}
{{- end -}}

{{- if eq $type "busuanzi" -}}
    {{- $default := "/npm/busuanzi@2.3.0/bsz.pure.mini.js" -}}
    {{- $path = $.Site.Params.lib.path.busuanzi | default $default -}}
{{- end -}}

{{- if eq $type "utterances" -}}
    {{- $default := "https://utteranc.es/client.js" -}}
    {{- $host = $.Site.Params.lib.path.utterances | default $default -}}
    {{- $path = "" -}}
{{- end -}}

{{- if eq $type "giscus" -}}
    {{- $default := "https://giscus.app/client.js" -}}
    {{- $host = $.Site.Params.lib.path.giscus | default $default -}}
    {{- $path = "" -}}
{{- end -}}

{{- return printf `%s%s` $host $path -}}